<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script> <!--On hover interactions-->

    <meta charset="utf-8" />
    <title>Online Model</title>
    <style>
        body {
            font-family: "Lato", sans-serif;
        }

        .sidebar {
            height: 100%;
            width: 0;
            position: fixed;
            z-index: 1;
            top: 0;
            left: 0;
            background-color: #e6e6e6;
            overflow-x: hidden;
            transition: 0.5s;
            padding-top: 60px;
        }

        .sidebar {
            padding: 8px 8px 8px 0px;
            text-decoration: none;
            font-size: 20px;
            color: #818181;
            display: block;
            transition: 0.5s;
        }

            .sidebar a:hover {
                color: #f1f1f1;
            }

            .sidebar .closebtn {
                position: absolute;
                top: 0;
                right: 25px;
                font-size: 36px;
            }

        .openbtn {
            font-size: 20px;
            cursor: pointer;
            background-color: #111;
            color: white;
            padding: 10px 15px;
            border: none;
        }

            .openbtn:hover {
                background-color: #444;
            }

        #main {
            transition: margin-left .5s;
            padding: 16px;
        }

        /* On smaller screens, where height is less than 450px, change the style of the sidenav (less padding and a smaller font size) */
        @media screen and (max-height: 450px) {
            .sidebar {
                padding-top: 15px;
            }

                .sidebar a {
                    font-size: 18px;
                }
        }
    </style>
</head>

<body>
    <a-scene>
        <a-assets>
            <img id="perisImg" src="https://rhysclawdd.github.io/Peris.jpg">
        </a-assets>
        <a-entity position="4 20 8" rotation="0 0 0">
            <a-entity camera look-controls wasd-controls>
                <a-entity animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 150; from: 0.1 0.1 0.1; to: 1 1 1"
                          animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 1500; from: 1 1 1; to: 0.1 0.1 0.1"
                          animation__mouseleave="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 500; to: 1 1 1"
                          cursor="fuse: true;"
                          material="color: black; shader: flat"
                          position="0 0 -3"
                          geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.027"></a-entity>
            </a-entity>
        </a-entity>

        <a-entity id="building18" position="-18 0 18" class="fridd">
            <a-box depth="10" width="20" height="3" position="0 1.5 0" color="grey"></a-box>
            <a-box depth="8" width="4" height="3" position="11 1.5 -4" color="grey"></a-box>
            <a-box depth="3" width="22" height="3" position="-2 1.5 -6.5" color="grey"></a-box>
            <a-box depth="8" width="2" height="3" position="9 1.5 4" color="grey"></a-box>
        </a-entity>

        <a-entity id="building19" position="4 0 18" class="fridd">
            <a-entity id="building19SectionA" position="0 0 -6">
                <a-box depth="6" width="4" height="3" position="0 1.5 0" color="grey"></a-box>
                <a-box depth="8" width="2" height="3" position="0 1.5 0" color="grey"></a-box>
            </a-entity>
            <a-entity id="building19SectionB" position="-2 0 0">
                <a-box depth="6" width="4" height="3" position="0 1.5 0" color="grey"></a-box>
                <a-box depth="8" width="2" height="3" position="0 1.5 0" color="grey"></a-box>
            </a-entity>
        </a-entity>

        <a-entity id="Fridd20-22" position="-40 0 -5" class="fridd">
            <a-entity id="building20" position="0 0 0">
                <a-box depth="3" width="8" height="4" position="0 2 0" color="grey" class="building20"></a-box>
                <a-box depth="12" width="3" height="4" position="0 2 -2" color="grey"></a-box>
            </a-entity>
            <a-entity id="building21" position="12 0 0">
                <a-box depth="3" width="8" height="4" position="0 2 0" color="grey"></a-box>
                <a-box depth="12" width="3" height="4" position="0 2 -2" color="grey"></a-box>
            </a-entity>

            <a-entity id="building22" position="24 0 0">
                <a-box depth="3" width="8" height="4" position="0 2 0" color="grey"></a-box>
                <a-box depth="12" width="3" height="4" position="0 2 -2" color="grey"></a-box>
            </a-entity>
        </a-entity>

        <a-entity id="building23" position="0 0 0" class="fridd">
            <a-entity id="building23SectionA" position="0 0 0">
                <a-box depth="6" width="4" height="3" position="4 1.5 0" color="grey"></a-box>
                <a-box depth="8" width="2" height="3" position="4 1.5 0" color="grey"></a-box>
            </a-entity>
            <a-entity id="building23SectionB" position="0 0 0" rotation="0 90 0">
                <a-box depth="6" width="4" height="3" position="4 1.5 0" color="grey"></a-box>
                <a-box depth="8" width="2" height="3" position="4 1.5 0" color="grey"></a-box>
            </a-entity>
            <a-entity id="building23SectionC" position="-8 0 -8">
                <a-box depth="6" width="4" height="3" position="4 1.5 0" color="grey"></a-box>
                <a-box depth="6" width="2" height="3" position="4 1.5 1s" color="grey"></a-box>
            </a-entity>
            <a-entity id="building23SectionD" position="-6 0 -14">
                <a-box depth="6" width="4" height="3" position="4 1.5 0" color="grey"></a-box>
                <a-box depth="6" width="2" height="3" position="4 1.5 -1" color="grey"></a-box>
            </a-entity>
        </a-entity>

        <a-entity id="building24" position="12 0 -8" class="fridd">
            <a-entity id="building24SectionA" position="0 0 -6">
                <a-box depth="6" width="4" height="3" position="4 1.5 0" color="grey"></a-box>
                <a-box depth="8" width="2" height="3" position="4 1.5 0" color="grey"></a-box>
            </a-entity>
            <a-entity id="building24SectionB" position="-2 0 0">
                <a-box depth="6" width="4" height="3" position="4 1.5 0" color="grey"></a-box>
                <a-box depth="8" width="2" height="3" position="4 1.5 0" color="grey"></a-box>
            </a-entity>
            <a-entity id="building24SectionC" position="0 0 -6" rotation="0 90 0">
                <a-box depth="6" width="4" height="3" position="4 1.5 0" color="grey"></a-box>
                <a-box depth="6" width="2" height="3" position="4 1.5 1s" color="grey"></a-box>
            </a-entity>
            <a-entity id="building24SectionD" position="-6 0 -4" rotation="0 90 0">
                <a-box depth="6" width="4" height="3" position="4 1.5 0" color="grey"></a-box>
                <a-box depth="8" width="2" height="3" position="4 1.5 0" color="grey"></a-box>
            </a-entity>
        </a-entity>

        <a-entity id="building30" position="14 0 14" class="fridd">
            <a-entity id="building30SectionA" position="0 0 -6">
                <a-box depth="6" width="4" height="3" position="0 1.5 0" color="grey"></a-box>
                <a-box depth="8" width="2" height="3" position="0 1.5 0" color="grey"></a-box>
            </a-entity>
            <a-entity id="building30SectionB" position="2 0 0">
                <a-box depth="6" width="4" height="3" position="0 1.5 0" color="grey"></a-box>
                <a-box depth="8" width="2" height="3" position="0 1.5 0" color="grey"></a-box>
            </a-entity>
        </a-entity>



    </a-scene>

    <div id="mySidebar" class="sidebar">
        <div>
            <button onclick="selectFridd">Select Fridd</button>
        </div>
        <button class="openbtn" onclick="closeNav()">CLOSE</button>
        <h1 id="type">Map Area</h1>
        <h2 id="subType">If you're reading this an error has occured</h2>
        <p id="subTypeDesc">
            This Error has occured most likely due to a failure to swap the innerHTML of this section with the intended description
        </p>
    </div>

    <script>
        var scene = d3.select("a-scene")
        var x = document.getElementById("type");
        var y = document.getElementById("subType");
        var z = document.getElementById("subTypeDesc");
        var image = scene.selectAll("a-image.displayImg").data("displayImg")

        loadDataToModel("building18", "Friddoedd Site", "Y Brailsfordd (Gym and Leisure Center)", "Gym and Leisure Center", image);
        loadDataToModel("building19", "Friddoedd Site", "Elidir Halls", "A generic halls building");
        loadDataToModel("building20", "Friddoedd Site", "Enlli Halls", "The Left of the 3");
        loadDataToModel("building21", "Friddoedd Site", "Peris Halls", "The Middle of the 3");
        loadDataToModel("building22", "Friddoedd Site", "Alaw Halls", "The Right of the 3");
        loadDataToModel("building23", "Friddoedd Site", "Y Borth Halls", "Seperated into multiple blocks these older buildings ...");
        loadDataToModel("building24", "Friddoedd Site", "Cefn y Coed Halls", "Seperated into multiple blocks these older buildings ...");
        loadDataToModel("building30", "Friddoedd Site", "Y Glyder Halls & Security Lodge", "A Halls building and a security lodge");

        //Sidebar Functionss
        function openNav() {
            document.getElementById("mySidebar").style.width = "33%";
            document.getElementById("mySidebar").style.paddingLeft = "32px";
        }
        function closeNav() {
            document.getElementById("mySidebar").style.width = "0";
            document.getElementById("mySidebar").style.paddingLeft = "0";
        }
        function loadDataToModel(buildingID, type, subtype, subtypeDesc, image) {
            console.log("#" + buildingID)
            var buildingID = d3.select("#" + buildingID)
                .on("click", function () {
                    console.log("Displaying " + buildingID)
                    x.innerHTML = type;
                    y.innerHTML = subtype;
                    z.innerHTML = subtypeDesc;
                    openNav()
                    image.enter().append("a-image")
                    image.attr({
                        src: "#perisImg"
                    })
                })
                .on("mouseenter", function () {
                    if (this.hovering) return
                    this.hovering = true;
                    d3.select(this).selectAll("a-box").transition().duration(500)
                        .attr({
                            "color": "green"
                        })
                })
                .on("mouseleave", function () {
                    this.hovering = false;
                    d3.select(this).selectAll("a-box").transition().duration(500)
                        .attr({
                            "color": 'grey'
                        })
                })
        }
        function selectFridd() {
            var fridd = d3.selectAll(".fridd")
                .attr({
                    "color": 'red'
                })
        }
    </script>
</body>
</html>
